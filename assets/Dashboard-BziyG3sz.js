var Me=Object.defineProperty;var $e=(o,e,t)=>e in o?Me(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Z=(o,e,t)=>$e(o,typeof e!="symbol"?e+"":e,t);import{u as re}from"./index-Gt7MbQT3.js";import{_ as P,r as E,c as K,A as O,s as se,L as De,M as Ie,S as ke,u as Ne}from"./LogoIcon-CDUS7YXq.js";import{l as R,f as S,n as w,k as D,E as b,p as ge,x as Te,z as Ce,b as j,e as F,r as f,w as c,m as d,u as $,t as T,v as U,A as X,o as ne,B as xe,C as Re,D as ue,F as Pe,G as z,H as te,I as ae,J as me,K as Le,L as Ae,M as Ve,N as Fe,O as Ee,P as qe}from"./vendor-DbdYn3yV.js";const Be={name:"GithubIcon"},Oe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function ze(o,e,t,a,n,i){return S(),R("svg",Oe,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)]))}const He=P(Be,[["render",ze]]),Je={name:"LogoutIcon"},Ue={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function je(o,e,t,a,n,i){return S(),R("svg",Ue,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"M11 12V4q0-.425.288-.712T12 3t.713.288T13 4v8q0 .425-.288.713T12 13t-.712-.288T11 12m1 9q-1.85 0-3.488-.712T5.65 18.35t-1.937-2.863T3 12q0-1.725.638-3.312T5.425 5.85q.275-.3.7-.3t.725.3q.275.275.25.688t-.3.737q-.85.95-1.325 2.163T5 12q0 2.9 2.05 4.95T12 19q2.925 0 4.963-2.05T19 12q0-1.35-.475-2.588t-1.35-2.187q-.275-.3-.288-.7t.263-.675q.3-.3.725-.3t.7.3q1.175 1.25 1.8 2.838T21 12q0 1.85-.712 3.488t-1.925 2.862t-2.85 1.938T12 21"},null,-1)]))}const Ye=P(Je,[["render",je]]),Ge={name:"AlarmClockIcon"},Ke={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function We(o,e,t,a,n,i){return S(),R("svg",Ke,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"m22 5.7l-4.6-3.9l-1.3 1.5l4.6 3.9zM7.9 3.4L6.6 1.9L2 5.7l1.3 1.5zM12.5 8H11v6l4.7 2.9l.8-1.2l-4-2.4zM12 4c-5 0-9 4-9 9s4 9 9 9s9-4 9-9s-4-9-9-9m0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7s7 3.1 7 7s-3.1 7-7 7"},null,-1)]))}const Qe=P(Ge,[["render",We]]),Xe={name:"RefreshIcon"},Ze={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function e0(o,e,t,a,n,i){return S(),R("svg",Ze,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"},null,-1)]))}const o0=P(Xe,[["render",e0]]),t0={name:"UserIcon"},i0={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function n0(o,e,t,a,n,i){return S(),R("svg",i0,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88a9.95 9.95 0 0 1 12.28 0C16.43 19.18 14.03 20 12 20"},null,-1)]))}const a0=P(t0,[["render",n0]]),d0={name:"SettingsIcon"},l0={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function c0(o,e,t,a,n,i){return S(),R("svg",l0,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"M19.14 12.94c.04-.3.06-.61.06-.94c0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.49.49 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6s-1.62 3.6-3.6 3.6"},null,-1)]))}const s0=P(d0,[["render",c0]]),r0={name:"MapLocationIcon"},g0={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function u0(o,e,t,a,n,i){return S(),R("svg",g0,e[0]||(e[0]=[w("path",{fill:"currentColor",d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4s4-1.79 4-4s-1.79-4-4-4m8.94 3A8.994 8.994 0 0 0 13 3.06V2c0-.55-.45-1-1-1s-1 .45-1 1v1.06A8.994 8.994 0 0 0 3.06 11H2c-.55 0-1 .45-1 1s.45 1 1 1h1.06A8.994 8.994 0 0 0 11 20.94V22c0 .55.45 1 1 1s1-.45 1-1v-1.06A8.994 8.994 0 0 0 20.94 13H22c.55 0 1-.45 1-1s-.45-1-1-1zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7s7 3.13 7 7s-3.13 7-7 7"},null,-1)]))}const m0=P(r0,[["render",u0]]),W={login:async(o,e)=>{const t=se(e);return E.post(O.login,{...K.device,password:t,userPhone:o})},sendSms:async o=>E.get(O.sendSms,{params:{phoneNum:o}}),updatePassword:async(o,e,t)=>{const a=se(e);return E.post(O.updatePassword,{password:a,passwordRes:a,userPhone:o,code:t})},getUserInfo:()=>E.get(O.user),getActivityInfo:(o,e)=>E.get(O.activity,{params:{schoolId:o,studentId:e}}),getRunStandard:o=>E.get(O.runStandard,{params:{schoolId:o}}),getSchoolBound:o=>E.get(O.schoolBound,{params:{schoolId:o}}),getRunInfo:(o,e)=>E.get(O.runInfo,{params:{userId:o,yearSemester:e}}),getRunRecord:(o,e)=>E.get(O.runRecord,{params:{pageNum:o,pageSize:e}}),submitNewActivity:async o=>E.post(O.newActivity,o),getNotice:()=>E.get(K.urls.notice)};function p0(){const o=D(null),e=D(!1),t=n=>n>100?100:n;return{activity:o,isLoading:e,fetchActivity:async(n,i)=>{if(!n||!i){console.error("Missing required params:",{schoolId:n,studentId:i}),b.error("获取活动信息失败：缺少必要参数");return}e.value=!0,o.value=null;try{const{response:s}=await W.getActivityInfo(n,i),{totalNum:l,joinNum:r,runTotalNum:g,runJoinNum:p}=s,y=`${r}/${l}`,h=`${p}/${g}`;let M=l===0?0:Math.floor(r/l*100),v=g===0?0:Math.floor(p/g*100);M=t(M),v=t(v),o.value={totalNum:l,joinNum:r,runTotalNum:g,runJoinNum:p,club_completion_rate:y,running_completion_rate:h,club_completion_percentage:M,running_completion_percentage:v},localStorage.setItem("activityData",JSON.stringify(o.value))}catch(s){console.error("获取活动信息失败:",s),b.error("获取活动信息失败，请重试")}finally{e.value=!1}}}}function f0(){const o=D(null),e=a=>a>100?100:a;return{runInfo:o,fetchRunInfo:async a=>{o.value=null;try{const n=JSON.parse(localStorage.getItem("runStandardData")||"{}");if(!n.semesterYear)return b.error("错误: 缺少学期年份信息"),!1;const i=n.semesterYear,s=Number(n.girlAllRunDistance),{response:l}=await W.getRunInfo(a,i),r=Number(l.runValidDistance),g=`${r}/${s}`;let p=s===0||r===0?0:Math.floor(r/s*100);p=e(p),o.value={...l,needRunDistance:s,runValidDistance:r,runDistanceCompletionRate:g,runDistanceCompletionPercentage:p},localStorage.setItem("runInfoData",JSON.stringify(o.value))}catch(n){console.error("获取跑步信息失败:",n),b.error("获取跑步信息失败")}}}}function pe(){const o=D(1e3),e=D(5e3),t=D(30),a=D(100),n=D(null),i=D(""),s=async g=>{try{const{response:p}=await W.getRunStandard(g);n.value=p,localStorage.setItem("runStandardData",JSON.stringify(p)),l()}catch(p){console.error("获取跑步标准信息失败:",p),b.error("获取跑步标准信息失败"+p.message)}},l=()=>{const g=JSON.parse(localStorage.getItem("runStandardData")||"{}"),y=JSON.parse(localStorage.getItem("userData")||"{}").gender,h=g.semesterYear,M=h&&h.slice(-1)==="2";y==="1"?(o.value=g.boyOnceDistanceMin,e.value=g.boyOnceDistanceMax,t.value=g.boyOnceTimeMin,a.value=g.boyOnceTimeMax):(o.value=g.girlOnceDistanceMin,e.value=g.girlOnceDistanceMax,t.value=g.girlOnceTimeMin,a.value=g.girlOnceTimeMax),i.value=M?g.secondSemesterDateEnd:g.firstSemesterDateEnd};return{runDistanceMin:o,runDistanceMax:e,runTimeMin:t,runTimeMax:a,runStandardData:n,semesterDateEnd:i,fetchRunStandard:s,showEndDate:()=>{const g=JSON.parse(localStorage.getItem("runStandardData")||"{}"),p=g.semesterYear,h=p&&p.slice(-1)==="2"?g.secondSemesterDateEnd:g.firstSemesterDateEnd;h?b({message:`本学期校园跑截至日期：${h}`,type:"info",duration:3e3}):b.warning("未获取到截至日期信息")},setRunStandardValues:l}}function _0(){const o=D([]),e=D(!1),t=ge({current:1,pageSize:30,total:150}),a=async()=>{e.value=!0;try{const{response:i}=await W.getRunRecord(t.current,t.pageSize),s=Array.isArray(i)?i:(i==null?void 0:i.records)||[];if(s.length===0){b.info("暂无跑步记录"),o.value=[];return}o.value=s.map(l=>({...l,key:l.recordId,runDistance:Number(l.runValidDistance||l.runDistance),runTime:Number(l.runValidTime||l.runTime),runSpeed:l.runStatus==="1"?l.runSpeed:0})),t.total=150}catch(i){console.error("获取跑步记录失败:",i),b.error("获取跑步记录失败")}finally{e.value=!1}};return{records:o,loading:e,pagination:t,fetchRecords:a,handleTableChange:async i=>{t.current=i,await a()}}}function h0(){const o=Te(),e=re(),{activity:t,fetchActivity:a}=p0(),{runInfo:n,fetchRunInfo:i}=f0(),{runStandardData:s,fetchRunStandard:l,runDistanceMin:r,runDistanceMax:g,runTimeMin:p,runTimeMax:y}=pe(),{records:h,pagination:M,fetchRecords:v,handleTableChange:m}=_0(),u=D(!1),I=async()=>{try{const{response:x}=await W.getUserInfo();return!0}catch(x){return console.error("Token验证失败:",x),b.error("登录已过期，请重新登录"),e.logout(),o.push("/login"),!1}};return{loading:u,activity:t,runInfo:n,runStandardData:s,runDistanceMin:r,runDistanceMax:g,runTimeMin:p,runTimeMax:y,records:h,pagination:M,handleTableChange:m,refreshData:async()=>{var H,J,k;if(u.value){console.log("数据正在刷新中，请稍候...");return}if(!await I())return;const{userId:A,schoolId:V,studentId:q}=e.userInfo||{};if(!A||!V||!q){b.error("获取用户信息失败"),o.push("/login");return}u.value=!0;try{await Promise.all([l(V),a(V,q),i(A),v()]),console.log("数据刷新完成")}catch(C){console.error("刷新数据失败:",C),((H=C.response)==null?void 0:H.status)===401||((k=(J=C.response)==null?void 0:J.data)==null?void 0:k.code)===401?(b.error("登录已过期，请重新登录"),e.logout(),o.push("/login")):b.error("数据刷新失败，请重试")}finally{u.value=!1}},initDashboard:async()=>{var q,H,J;if(u.value){console.log("正在加载中，请稍候...");return}const{userId:x,schoolId:A,studentId:V}=e.userInfo||{};if(!x||!A||!V){b.error("获取用户信息失败"),o.push("/login");return}try{if(u.value=!0,console.log("开始加载数据..."),!await I()){console.log("Token验证失败，终止后续请求"),u.value=!1;return}console.log("Token验证成功，开始获取数据...");try{await l(A),console.log("获取跑步标准完成")}catch(C){throw console.error("获取跑步标准失败:",C),C}try{await a(A,V),console.log("获取活动信息完成")}catch(C){console.error("获取活动信息失败:",C),b.warning("获取活动信息失败")}try{await i(x),console.log("获取跑步信息完成")}catch(C){console.error("获取跑步信息失败:",C),b.warning("获取跑步信息失败")}try{await v(),console.log("获取跑步记录完成")}catch(C){console.error("获取跑步记录失败:",C),b.warning("获取跑步记录失败")}}catch(k){console.error("初始化仪表板失败:",k),((q=k.response)==null?void 0:q.status)===401||((J=(H=k.response)==null?void 0:H.data)==null?void 0:J.code)===401?(b.error("登录已过期，请重新登录"),e.logout(),o.push("/login")):b.error("数据加载失败，请重试")}finally{u.value=!1,console.log("加载状态结束")}}}}const v0={mapdata:[{id:0,location:"103.9857179,30.5809638",edge:[1]},{id:1,location:"103.985738,30.5809205",edge:[2]},{id:2,location:"103.9857497,30.5808788",edge:[3]},{id:3,location:"103.9857475,30.5808847",edge:[4]},{id:4,location:"103.9857554,30.5808539",edge:[5]},{id:5,location:"103.985763,30.5808084",edge:[6]},{id:6,location:"103.9857691,30.5807536",edge:[7]},{id:7,location:"103.9857758,30.5806854",edge:[8]},{id:8,location:"103.9857836,30.580608",edge:[9]},{id:9,location:"103.9857918,30.5805238",edge:[10]},{id:10,location:"103.9857992,30.5804395",edge:[11]},{id:11,location:"103.9858042,30.5803542",edge:[12]},{id:12,location:"103.9858071,30.5802669",edge:[13]},{id:13,location:"103.9858076,30.5801809",edge:[14]},{id:14,location:"103.9858009,30.5801015",edge:[15]},{id:15,location:"103.9857875,30.5800312",edge:[16]},{id:16,location:"103.9857839,30.5799658",edge:[17]},{id:17,location:"103.9858023,30.5799011",edge:[18]},{id:18,location:"103.9858411,30.5798373",edge:[19]},{id:19,location:"103.9859004,30.5797807",edge:[20]},{id:20,location:"103.9859782,30.5797358",edge:[21]},{id:21,location:"103.986057,30.5797023",edge:[22]},{id:22,location:"103.9861197,30.5796808",edge:[23]},{id:23,location:"103.9861838,30.5796711",edge:[24]},{id:24,location:"103.9862593,30.5796713",edge:[25]},{id:25,location:"103.9863325,30.5796826",edge:[26]},{id:26,location:"103.9864012,30.5797074",edge:[27]},{id:27,location:"103.9864649,30.5797449",edge:[28]},{id:28,location:"103.9865197,30.5797938",edge:[29]},{id:29,location:"103.986563,30.5798518",edge:[30]},{id:30,location:"103.9865975,30.5799187",edge:[31]},{id:31,location:"103.9866228,30.5799914",edge:[32]},{id:32,location:"103.9866387,30.5800662",edge:[33]},{id:33,location:"103.9866525,30.5801413",edge:[34]},{id:34,location:"103.9866683,30.5802165",edge:[35]},{id:35,location:"103.9866832,30.5802924",edge:[36]},{id:36,location:"103.9866961,30.5803678",edge:[37]},{id:37,location:"103.9867016,30.5804435",edge:[38]},{id:38,location:"103.986699,30.5805202",edge:[39]},{id:39,location:"103.9866949,30.580598",edge:[40]},{id:40,location:"103.9866801,30.5807211",edge:[41]},{id:41,location:"103.986665,30.5807755",edge:[42]},{id:42,location:"103.9866497,30.5808384",edge:[43]},{id:43,location:"103.9866291,30.5809089",edge:[44]},{id:44,location:"103.9865956,30.5809817",edge:[45]},{id:45,location:"103.9865539,30.5810445",edge:[46]},{id:46,location:"103.9865053,30.5810935",edge:[47]},{id:47,location:"103.9864467,30.5811303",edge:[48]},{id:48,location:"103.9863794,30.5811562",edge:[49]},{id:49,location:"103.9863057,30.581171",edge:[50]},{id:50,location:"103.9862281,30.581172",edge:[51]},{id:51,location:"103.986148,30.5811621",edge:[52]},{id:52,location:"103.9860694,30.5811387",edge:[53]},{id:53,location:"103.985996,30.581098",edge:[54]},{id:54,location:"103.9859327,30.5810431",edge:[55]},{id:55,location:"103.9858789,30.5809798",edge:[56]},{id:56,location:"103.9858336,30.5809134",edge:[57]},{id:57,location:"103.9857987,30.5808464",edge:[58]},{id:58,location:"103.9857765,30.5807749",edge:[59]},{id:59,location:"103.9857669,30.5807014",edge:[60]},{id:60,location:"103.9857616,30.5806368",edge:[61]},{id:61,location:"103.9857537,30.5805876",edge:[62]},{id:62,location:"103.9857444,30.580538",edge:[63]},{id:63,location:"103.9857422,30.5805046",edge:[64]},{id:64,location:"103.9857432,30.5804529",edge:[65]},{id:65,location:"103.9857432,30.5804012",edge:[66]},{id:66,location:"103.9857436,30.580339",edge:[67]},{id:67,location:"103.9857369,30.5802733",edge:[68]},{id:68,location:"103.9857252,30.5802025",edge:[69]},{id:69,location:"103.9857192,30.5801306",edge:[70]},{id:70,location:"103.9857185,30.5800598",edge:[71]},{id:71,location:"103.985725,30.5799905",edge:[72]},{id:72,location:"103.9857444,30.5799245",edge:[73]},{id:73,location:"103.9857746,30.5798676",edge:[74]},{id:74,location:"103.9858166,30.5798206",edge:[75]},{id:75,location:"103.9858732,30.5797804",edge:[76]},{id:76,location:"103.9859419,30.579748",edge:[77]},{id:77,location:"103.9860221,30.5797239",edge:[78]},{id:78,location:"103.9861127,30.5797084",edge:[79]},{id:79,location:"103.9862049,30.5797026",edge:[80]},{id:80,location:"103.9862798,30.5797044",edge:[81]},{id:81,location:"103.986334,30.5797123",edge:[82]},{id:82,location:"103.9863856,30.5797311",edge:[83]},{id:83,location:"103.9864349,30.5797617",edge:[84]},{id:84,location:"103.9864967,30.5798123",edge:[85]},{id:85,location:"103.9865262,30.5798488",edge:[86]},{id:86,location:"103.9865498,30.5798927",edge:[87]},{id:87,location:"103.9865678,30.5799456",edge:[88]},{id:88,location:"103.9865822,30.5800084",edge:[89]},{id:89,location:"103.9865955,30.5800751",edge:[90]},{id:90,location:"103.986607,30.5801449",edge:[91]},{id:91,location:"103.9866183,30.580217",edge:[92]},{id:92,location:"103.9866301,30.5802885",edge:[93]},{id:93,location:"103.9866406,30.5803598",edge:[94]},{id:94,location:"103.9866521,30.5804252",edge:[95]},{id:95,location:"103.9866612,30.5804822",edge:[96]},{id:96,location:"103.9866621,30.5805399",edge:[97]},{id:97,location:"103.9866592,30.5805994",edge:[98]},{id:98,location:"103.9866538,30.5806588",edge:[99]},{id:99,location:"103.9866458,30.5807213",edge:[100]},{id:100,location:"103.986636,30.5807868",edge:[101]},{id:101,location:"103.9866164,30.5808529",edge:[102]},{id:102,location:"103.9865822,30.580916",edge:[103]},{id:103,location:"103.9865341,30.5809733",edge:[104]},{id:104,location:"103.9864745,30.5810203",edge:[105]},{id:105,location:"103.9864072,30.5810567",edge:[106]},{id:106,location:"103.9863335,30.5810817",edge:[107]},{id:107,location:"103.9862597,30.5810957",edge:[108]},{id:108,location:"103.9861853,30.5810992",edge:[109]},{id:109,location:"103.9861073,30.5810925",edge:[110]},{id:110,location:"103.9860309,30.5810771",edge:[111]},{id:111,location:"103.9859627,30.5810466",edge:[112]},{id:112,location:"103.985905,30.5810011",edge:[113]},{id:113,location:"103.9858561,30.5809473",edge:[114]},{id:114,location:"103.9858145,30.5808867",edge:[115]},{id:115,location:"103.9857822,30.5808223",edge:[116]},{id:116,location:"103.98576,30.5807579",edge:[117]},{id:117,location:"103.9857472,30.5806918",edge:[118]},{id:118,location:"103.9857439,30.580622",edge:[119]},{id:119,location:"103.9857472,30.5805579",edge:[120]},{id:120,location:"103.9857516,30.5805107",edge:[121]},{id:121,location:"103.9857568,30.5804651",edge:[122]},{id:122,location:"103.9857642,30.58041",edge:[123]},{id:123,location:"103.9857714,30.5803474",edge:[124]},{id:124,location:"103.9857784,30.5802782",edge:[125]},{id:125,location:"103.9857829,30.5802076",edge:[126]},{id:126,location:"103.9857839,30.5801343",edge:[127]},{id:127,location:"103.9857865,30.5800614",edge:[128]},{id:128,location:"103.985792,30.579992",edge:[129]},{id:129,location:"103.985804,30.5799239",edge:[130]},{id:130,location:"103.9858277,30.5798605",edge:[131]},{id:131,location:"103.9858674,30.5798047",edge:[132]},{id:132,location:"103.9859423,30.5797342",edge:[133]},{id:133,location:"103.9859737,30.579716",edge:[134]},{id:134,location:"103.9860285,30.5796914",edge:[135]},{id:135,location:"103.9860843,30.5796729",edge:[136]},{id:136,location:"103.9861498,30.5796594",edge:[137]},{id:137,location:"103.9862224,30.5796542",edge:[138]},{id:138,location:"103.9862999,30.5796586",edge:[139]},{id:139,location:"103.9863703,30.5796706",edge:[140]},{id:140,location:"103.9864323,30.5796932",edge:[141]},{id:141,location:"103.9864898,30.5797325",edge:[142]},{id:142,location:"103.9865384,30.5797808",edge:[143]},{id:143,location:"103.9865759,30.5798349",edge:[144]},{id:144,location:"103.9866006,30.5798975",edge:[145]},{id:145,location:"103.9866126,30.579965",edge:[146]},{id:146,location:"103.9866185,30.5800337",edge:[147]},{id:147,location:"103.9866226,30.5801042",edge:[148]},{id:148,location:"103.9866277,30.5801742",edge:[149]},{id:149,location:"103.9866358,30.5802438",edge:[150]},{id:150,location:"103.986642,30.5803137",edge:[151]},{id:151,location:"103.9866475,30.5803834",edge:[152]},{id:152,location:"103.9866513,30.5804529",edge:[153]},{id:153,location:"103.9866487,30.5805463",edge:[154]},{id:154,location:"103.9866434,30.5805994",edge:[155]},{id:155,location:"103.9866379,30.580657",edge:[156]},{id:156,location:"103.986632,30.5807195",edge:[157]},{id:157,location:"103.9866241,30.5807861",edge:[158]},{id:158,location:"103.9866102,30.58085",edge:[159]},{id:159,location:"103.9865881,30.5809081",edge:[160]},{id:160,location:"103.9865436,30.5809801",edge:[161]},{id:161,location:"103.9865018,30.5810147",edge:[162]},{id:162,location:"103.9864491,30.5810458",edge:[163]},{id:163,location:"103.9863875,30.5810722",edge:[164]},{id:164,location:"103.9863196,30.5810925",edge:[165]},{id:165,location:"103.9862521,30.5811057",edge:[166]},{id:166,location:"103.9861882,30.5811101",edge:[167]},{id:167,location:"103.9861247,30.5811041",edge:[168]},{id:168,location:"103.9860627,30.5810865",edge:[169]},{id:169,location:"103.9860077,30.581057",edge:[170]},{id:170,location:"103.9859588,30.5810177",edge:[171]},{id:171,location:"103.9859194,30.5809795",edge:[172]},{id:172,location:"103.9858921,30.5809451",edge:[173]},{id:173,location:"103.985865,30.5809013",edge:[174]},{id:174,location:"103.9858406,30.5808475",edge:[175]},{id:175,location:"103.9858272,30.5807994",edge:[176]},{id:176,location:"103.985821,30.580763",edge:[177]},{id:177,location:"103.9858186,30.5807327",edge:[178]},{id:178,location:"103.9858172,30.5807077",edge:[179]},{id:179,location:"103.9858167,30.5806858",edge:[180]},{id:180,location:"103.9858169,30.5806515",edge:[181]},{id:181,location:"103.9858184,30.5806353",edge:[182]},{id:182,location:"103.9858229,30.5806104",edge:[183]},{id:183,location:"103.9858274,30.5805687",edge:[184]},{id:184,location:"103.9858275,30.5805119",edge:[185]},{id:185,location:"103.9858241,30.5804478",edge:[186]},{id:186,location:"103.9858172,30.5803788",edge:[187]},{id:187,location:"103.98581,30.5803103",edge:[188]},{id:188,location:"103.9858066,30.5802438",edge:[189]},{id:189,location:"103.9858037,30.5801785",edge:[190]},{id:190,location:"103.9858006,30.5801139",edge:[191]},{id:191,location:"103.9858011,30.5800474",edge:[192]},{id:192,location:"103.9858107,30.5799774",edge:[193]},{id:193,location:"103.985826,30.5799081",edge:[194]},{id:194,location:"103.985849,30.5798421",edge:[195]},{id:195,location:"103.9858883,30.5797804",edge:[196]},{id:196,location:"103.9859407,30.5797275",edge:[197]},{id:197,location:"103.9860063,30.579685",edge:[198]},{id:198,location:"103.9860733,30.5796554",edge:[199]},{id:199,location:"103.986148,30.5796413",edge:[200]},{id:200,location:"103.9862222,30.5796385",edge:[201]},{id:201,location:"103.986281,30.579644",edge:[202]},{id:202,location:"103.986344,30.5796601",edge:[203]},{id:203,location:"103.9864067,30.5796858",edge:[204]},{id:204,location:"103.9864649,30.579719",edge:[205]},{id:205,location:"103.9865149,30.5797506",edge:[206]},{id:206,location:"103.9865522,30.5797799",edge:[207]},{id:207,location:"103.9865872,30.5798209",edge:[208]},{id:208,location:"103.9866195,30.5798744",edge:[209]},{id:209,location:"103.9866444,30.5799361",edge:[210]},{id:210,location:"103.9866636,30.5800032",edge:[211]},{id:211,location:"103.9866791,30.5800719",edge:[212]},{id:212,location:"103.9866906,30.580141",edge:[213]},{id:213,location:"103.9866985,30.5802109",edge:[214]},{id:214,location:"103.9867052,30.5802812",edge:[215]},{id:215,location:"103.9867131,30.5803511",edge:[216]},{id:216,location:"103.9867188,30.5804204",edge:[217]},{id:217,location:"103.9867217,30.5804779",edge:[218]},{id:218,location:"103.9867239,30.5805182",edge:[219]},{id:219,location:"103.9867248,30.5805655",edge:[220]},{id:220,location:"103.9867205,30.5805913",edge:[221]},{id:221,location:"103.9867114,30.5806335",edge:[222]},{id:222,location:"103.9866988,30.5806852",edge:[223]},{id:223,location:"103.9866791,30.5807457",edge:[224]},{id:224,location:"103.9866583,30.5807994",edge:[225]},{id:225,location:"103.9866404,30.5808433",edge:[226]},{id:226,location:"103.9866166,30.5808922",edge:[227]},{id:227,location:"103.9865841,30.5809457",edge:[228]},{id:228,location:"103.9865498,30.580998",edge:[229]},{id:229,location:"103.9865122,30.5810467",edge:[230]},{id:230,location:"103.9864665,30.5810883",edge:[231]},{id:231,location:"103.9864156,30.5811233",edge:[232]},{id:232,location:"103.9863588,30.5811507",edge:[233]},{id:233,location:"103.9862956,30.5811703",edge:[234]},{id:234,location:"103.9862286,30.5811811",edge:[235]},{id:235,location:"103.9861599,30.5811807",edge:[236]},{id:236,location:"103.9860898,30.5811689",edge:[237]},{id:237,location:"103.9860216,30.5811473",edge:[238]},{id:238,location:"103.9859612,30.5811144",edge:[239]},{id:239,location:"103.9859124,30.5810758",edge:[240]},{id:240,location:"103.9858779,30.5810418",edge:[241]},{id:241,location:"103.9858514,30.5810029",edge:[242]},{id:242,location:"103.985825,30.5809508",edge:[243]},{id:243,location:"103.9857985,30.5808906",edge:[244]},{id:244,location:"103.9857767,30.5808225",edge:[245]},{id:245,location:"103.9857626,30.5807506",edge:[246]},{id:246,location:"103.9857547,30.58069",edge:[247]},{id:247,location:"103.9857549,30.5806393",edge:[248]},{id:248,location:"103.9857628,30.5805824",edge:[249]},{id:249,location:"103.9857707,30.5805246",edge:[250]},{id:250,location:"103.9857757,30.5804791",edge:[251]},{id:251,location:"103.9857728,30.5804329",edge:[252]},{id:252,location:"103.9857666,30.580376",edge:[253]},{id:253,location:"103.9857712,30.5803152",edge:[254]},{id:254,location:"103.9857772,30.5802492",edge:[255]},{id:255,location:"103.9857772,30.58018",edge:[256]},{id:256,location:"103.9857777,30.580113",edge:[257]},{id:257,location:"103.9857793,30.580048",edge:[258]},{id:258,location:"103.9857829,30.5799853",edge:[259]},{id:259,location:"103.9857875,30.5799266",edge:[260]},{id:260,location:"103.985803,30.5798732",edge:[261]},{id:261,location:"103.9858361,30.5798227",edge:[262]},{id:262,location:"103.9858935,30.5797576",edge:[263]},{id:263,location:"103.9859414,30.5797291",edge:[264]},{id:264,location:"103.9860003,30.5797059",edge:[265]},{id:265,location:"103.9860711,30.5796886",edge:[266]},{id:266,location:"103.9861527,30.579677",edge:[267]},{id:267,location:"103.9862355,30.5796738",edge:[268]},{id:268,location:"103.9863038,30.5796774",edge:[269]},{id:269,location:"103.98636,30.579686",edge:[270]},{id:270,location:"103.9864192,30.5797039",edge:[271]},{id:271,location:"103.9864744,30.5797337",edge:[272]},{id:272,location:"103.9865266,30.579778",edge:[273]},{id:273,location:"103.9865786,30.579837",edge:[274]},{id:274,location:"103.986618,30.5799033",edge:[275]},{id:275,location:"103.986641,30.5799726",edge:[276]},{id:276,location:"103.9866513,30.5800431",edge:[277]},{id:277,location:"103.9866547,30.5801154",edge:[278]},{id:278,location:"103.9866609,30.5801893",edge:[279]},{id:279,location:"103.98667,30.5802602",edge:[280]},{id:280,location:"103.9866803,30.5803274",edge:[281]},{id:281,location:"103.9866961,30.5803918",edge:[282]},{id:282,location:"103.9867126,30.5804526",edge:[283]},{id:283,location:"103.986726,30.5805101",edge:[284]},{id:284,location:"103.9867387,30.580566",edge:[285]},{id:285,location:"103.9867457,30.5806229",edge:[286]},{id:286,location:"103.9867444,30.5806833",edge:[287]},{id:287,location:"103.9867361,30.5807487",edge:[288]},{id:288,location:"103.9867205,30.5808154",edge:[289]},{id:289,location:"103.9867011,30.58087",edge:[290]},{id:290,location:"103.9866765,30.5809242",edge:[291]},{id:291,location:"103.9866624,30.5809438",edge:[292]},{id:292,location:"103.9866429,30.5809685",edge:[293]},{id:293,location:"103.9866212,30.5809907",edge:[294]},{id:294,location:"103.9865826,30.581025",edge:[295]},{id:295,location:"103.9865307,30.5810665",edge:[296]},{id:296,location:"103.9864718,30.5811081",edge:[297]},{id:297,location:"103.9864091,30.5811433",edge:[298]},{id:298,location:"103.9863409,30.5811674",edge:[299]},{id:299,location:"103.9862684,30.5811808",edge:[300]},{id:300,location:"103.9861958,30.5811847",edge:[301]},{id:301,location:"103.9861245,30.5811798",edge:[302]},{id:302,location:"103.9860544,30.5811679",edge:[303]},{id:303,location:"103.9859869,30.5811472",edge:[304]},{id:304,location:"103.985926,30.581112",edge:[305]},{id:305,location:"103.9858736,30.5810658",edge:[306]},{id:306,location:"103.9858327,30.581016",edge:[307]},{id:307,location:"103.9858011,30.5809624",edge:[308]},{id:308,location:"103.9857772,30.5809078",edge:[309]},{id:309,location:"103.9857666,30.5808563",edge:[310]},{id:310,location:"103.9857697,30.5808092",edge:[311]},{id:311,location:"103.9857813,30.5807521",edge:[312]},{id:312,location:"103.9857874,30.5807295",edge:[313]},{id:313,location:"103.9857884,30.5807152",edge:[314]},{id:314,location:"103.985782,30.5807031",edge:[315]},{id:315,location:"103.9857709,30.5806761",edge:[0]}]},y0={mapdata:[{id:0,location:"104.30599,30.607908",edge:[1]},{id:1,location:"104.306607,30.607608",edge:[2]},{id:2,location:"104.307213,30.607165",edge:[3]},{id:3,location:"104.307588,30.606643",edge:[4]},{id:4,location:"104.308356,30.607031",edge:[5]},{id:5,location:"104.307905,30.607705",edge:[6]},{id:6,location:"104.307165,30.608305",edge:[7]},{id:7,location:"104.306237,30.608634",edge:[8]},{id:8,location:"104.305228,30.60875",edge:[9]},{id:9,location:"104.304343,30.60857",edge:[10]},{id:10,location:"104.304434,30.608122",edge:[11]},{id:11,location:"104.304029,30.608203",edge:[12]},{id:12,location:"104.303292,30.606967",edge:[13]},{id:13,location:"104.302626,30.60597",edge:[14]},{id:14,location:"104.302342,30.605402",edge:[15]},{id:15,location:"104.303517,30.604945",edge:[16]},{id:16,location:"104.303447,30.60477",edge:[17]},{id:17,location:"104.303892,30.604567",edge:[18]},{id:18,location:"104.304273,30.604608",edge:[19]},{id:19,location:"104.304429,30.604423",edge:[20]},{id:20,location:"104.304724,30.604382",edge:[21]},{id:21,location:"104.304863,30.604202",edge:[22]},{id:22,location:"104.305432,30.603943",edge:[23]},{id:23,location:"104.305561,30.604169",edge:[24]},{id:24,location:"104.306661,30.60368",edge:[25]},{id:25,location:"104.306961,30.604285",edge:[26]},{id:26,location:"104.307117,30.60452",edge:[27]},{id:27,location:"104.307299,30.604968",edge:[28]},{id:28,location:"104.307483,30.60514",edge:[29]},{id:29,location:"104.307467,30.60514",edge:[30]},{id:30,location:"104.307853,30.605818",edge:[31]},{id:31,location:"104.308148,30.60634",edge:[32]},{id:32,location:"104.30811,30.606456",edge:[33]},{id:33,location:"104.307799,30.606686",edge:[34]},{id:34,location:"104.307579,30.60664",edge:[35]},{id:35,location:"104.307295,30.606215",edge:[36]},{id:36,location:"104.306984,30.605754",edge:[37]},{id:37,location:"104.307021,30.605624",edge:[38]},{id:38,location:"104.306952,30.605347",edge:[39]},{id:39,location:"104.306957,30.605329",edge:[40]},{id:40,location:"104.30685,30.605177",edge:[41]},{id:41,location:"104.306238,30.605403",edge:[42]},{id:42,location:"104.305793,30.60465",edge:[43]},{id:43,location:"104.305557,30.60417",edge:[44]},{id:44,location:"104.305391,30.603935",edge:[45]},{id:45,location:"104.304881,30.604184",edge:[46]},{id:46,location:"104.304726,30.604378",edge:[47]},{id:47,location:"104.304904,30.604523",edge:[48]},{id:48,location:"104.304996,30.604712",edge:[49]},{id:49,location:"104.304974,30.604846",edge:[50]},{id:50,location:"104.304829,30.604984",edge:[51]},{id:51,location:"104.304615,30.605058",edge:[52]},{id:52,location:"104.30447,30.605021",edge:[53]},{id:53,location:"104.304384,30.605141",edge:[54]},{id:54,location:"104.304284,30.605351",edge:[55]},{id:55,location:"104.303812,30.605374",edge:[56]},{id:56,location:"104.303935,30.605707",edge:[57]},{id:57,location:"104.304096,30.605993",edge:[58]},{id:58,location:"104.304109,30.606148",edge:[59]},{id:59,location:"104.304463,30.606195",edge:[60]},{id:60,location:"104.304699,30.606365",edge:[61]},{id:61,location:"104.304984,30.606059",edge:[62]},{id:62,location:"104.304861,30.605925",edge:[63]},{id:63,location:"104.304887,30.605699",edge:[64]},{id:64,location:"104.304941,30.605593",edge:[65]},{id:65,location:"104.305048,30.605519",edge:[66]},{id:66,location:"104.305199,30.605486",edge:[67]},{id:67,location:"104.305386,30.605496",edge:[68]},{id:68,location:"104.305558,30.605634",edge:[69]},{id:69,location:"104.305606,30.605796",edge:[70]},{id:70,location:"104.305596,30.60593",edge:[71]},{id:71,location:"104.30552,30.606027",edge:[72]},{id:72,location:"104.305333,30.606133",edge:[73]},{id:73,location:"104.305145,30.606142",edge:[74]},{id:74,location:"104.305005,30.606064",edge:[75]},{id:75,location:"104.304973,30.606059",edge:[76]},{id:76,location:"104.304802,30.606271",edge:[77]},{id:77,location:"104.304592,30.606502",edge:[78]},{id:78,location:"104.304501,30.606654",edge:[79]},{id:79,location:"104.304244,30.606959",edge:[80]},{id:80,location:"104.304169,30.607038",edge:[81]},{id:81,location:"104.304179,30.607088",edge:[82]},{id:82,location:"104.304222,30.607195",edge:[83]},{id:83,location:"104.304287,30.607301",edge:[84]},{id:84,location:"104.304405,30.607583",edge:[85]},{id:85,location:"104.304571,30.607878",edge:[86]},{id:86,location:"104.304909,30.607984",edge:[87]},{id:87,location:"104.305193,30.607984",edge:[88]},{id:88,location:"104.305692,30.607961",edge:[89]},{id:89,location:"104.305976,30.607892",edge:[90]},{id:90,location:"104.306127,30.60834",edge:[91]},{id:91,location:"104.306261,30.608649",edge:[92]},{id:92,location:"104.306695,30.608534",edge:[93]},{id:93,location:"104.307146,30.608307",edge:[94]},{id:94,location:"104.307055,30.608155",edge:[95]},{id:95,location:"104.306856,30.60791",edge:[96]},{id:96,location:"104.306631,30.607615",edge:[97]},{id:97,location:"104.307194,30.607167",edge:[98]},{id:98,location:"104.30757,30.606641",edge:[99]},{id:99,location:"104.307334,30.606281",edge:[100]},{id:100,location:"104.307001,30.605768",edge:[101]},{id:101,location:"104.306266,30.605814",edge:[102]},{id:102,location:"104.305633,30.6058",edge:[103]},{id:103,location:"104.305553,30.605644",edge:[104]},{id:104,location:"104.305413,30.605514",edge:[105]},{id:105,location:"104.30541,30.60544",edge:[106]},{id:106,location:"104.305517,30.605385",edge:[107]},{id:107,location:"104.306048,30.605154",edge:[108]},{id:108,location:"104.305979,30.604992",edge:[109]},{id:109,location:"104.307089,30.604517",edge:[110]},{id:110,location:"104.307336,30.604978",edge:[111]},{id:111,location:"104.306212,30.605415",edge:[112]},{id:112,location:"104.306094,30.605507",edge:[113]},{id:113,location:"104.306244,30.605816",edge:[114]},{id:114,location:"104.306727,30.605826",edge:[115]},{id:115,location:"104.307001,30.60577",edge:[116]},{id:116,location:"104.307001,30.605659",edge:[117]},{id:117,location:"104.307049,30.605609",edge:[118]},{id:118,location:"104.306958,30.605327",edge:[119]},{id:119,location:"104.307441,30.605147",edge:[120]},{id:120,location:"104.307274,30.604981",edge:[121]},{id:121,location:"104.306867,30.605165",edge:[122]},{id:122,location:"104.306963,30.605332",edge:[123]},{id:123,location:"104.307446,30.605147",edge:[124]},{id:124,location:"104.308154,30.606366",edge:[125]},{id:125,location:"104.308111,30.606449",edge:[126]},{id:126,location:"104.308063,30.606481",edge:[127]},{id:127,location:"104.307827,30.606698",edge:[128]},{id:128,location:"104.30834,30.607017",edge:[129]},{id:129,location:"104.307906,30.607691",edge:[130]},{id:130,location:"104.307214,30.607169",edge:[131]},{id:131,location:"104.307594,30.606641",edge:[132]},{id:132,location:"104.306983,30.605769",edge:[133]},{id:133,location:"104.306725,30.605833",edge:[134]},{id:134,location:"104.306232,30.605829",edge:[135]},{id:135,location:"104.30613,30.605478",edge:[136]},{id:136,location:"104.306216,30.605409",edge:[137]},{id:137,location:"104.305803,30.604638",edge:[138]},{id:138,location:"104.305448,30.604827",edge:[139]},{id:139,location:"104.305368,30.605172",edge:[140]},{id:140,location:"104.305186,30.605477",edge:[141]},{id:141,location:"104.304918,30.605583",edge:[142]},{id:142,location:"104.304644,30.605514",edge:[143]},{id:143,location:"104.304354,30.605444",edge:[144]},{id:144,location:"104.304252,30.605357",edge:[145]},{id:145,location:"104.304459,30.605032",edge:[146]},{id:146,location:"104.304459,30.605032",edge:[147]},{id:147,location:"104.3041,30.605309",edge:[148]},{id:148,location:"104.303783,30.605373",edge:[149]},{id:149,location:"104.303512,30.604932",edge:[150]},{id:150,location:"104.30238,30.605375",edge:[151]},{id:151,location:"104.302632,30.60598",edge:[152]},{id:152,location:"104.303785,30.605384",edge:[153]},{id:153,location:"104.304091,30.605961",edge:[154]},{id:154,location:"104.304097,30.606201",edge:[155]},{id:155,location:"104.303297,30.606996",edge:[156]},{id:156,location:"104.303571,30.607485",edge:[157]},{id:157,location:"104.304215,30.607217",edge:[158]},{id:158,location:"104.304574,30.607868",edge:[159]},{id:159,location:"104.304429,30.608122",edge:[160]},{id:160,location:"104.304553,30.607882",edge:[161]},{id:161,location:"104.305196,30.607974",edge:[162]},{id:162,location:"104.305239,30.60875",edge:[163]},{id:163,location:"104.306247,30.608654",edge:[0]}]},b0={mapdata:[{id:0,location:"103.808457,30.686278",edge:[1]},{id:1,location:"103.808511,30.686223",edge:[2]},{id:2,location:"103.808479,30.68595",edge:[3]},{id:3,location:"103.808291,30.68571",edge:[4]},{id:4,location:"103.808007,30.685563",edge:[5]},{id:5,location:"103.807567,30.685475",edge:[6]},{id:6,location:"103.806499,30.685415",edge:[7]},{id:7,location:"103.806215,30.68542",edge:[8]},{id:8,location:"103.806027,30.685351",edge:[9]},{id:9,location:"103.805909,30.685161",edge:[10]},{id:10,location:"103.805786,30.685074",edge:[11]},{id:11,location:"103.805663,30.685092",edge:[12]},{id:12,location:"103.805818,30.684788",edge:[13]},{id:13,location:"103.805888,30.684636",edge:[14]},{id:14,location:"103.805952,30.684363",edge:[15]},{id:15,location:"103.806156,30.683644",edge:[16]},{id:16,location:"103.806526,30.683164",edge:[17]},{id:17,location:"103.806526,30.683164",edge:[18]},{id:18,location:"103.806934,30.682942",edge:[19]},{id:19,location:"103.806907,30.68291",edge:[20]},{id:20,location:"103.807556,30.682716",edge:[21]},{id:21,location:"103.807894,30.682684",edge:[22]},{id:22,location:"103.808259,30.682716",edge:[23]},{id:23,location:"103.808774,30.682836",edge:[24]},{id:24,location:"103.809321,30.683132",edge:[25]},{id:25,location:"103.80968,30.683335",edge:[26]},{id:26,location:"103.809922,30.683496",edge:[27]},{id:27,location:"103.810791,30.683962",edge:[28]},{id:28,location:"103.811574,30.684391",edge:[29]},{id:29,location:"103.811622,30.684525",edge:[30]},{id:30,location:"103.811633,30.684626",edge:[31]},{id:31,location:"103.811424,30.685062",edge:[32]},{id:32,location:"103.811043,30.685666",edge:[33]},{id:33,location:"103.810716,30.686262",edge:[34]},{id:34,location:"103.810485,30.686635",edge:[35]},{id:35,location:"103.81012,30.687249",edge:[36]},{id:36,location:"103.809659,30.688125",edge:[37]},{id:37,location:"103.809359,30.688665",edge:[38]},{id:38,location:"103.809015,30.68926",edge:[39]},{id:39,location:"103.808838,30.68962",edge:[40]},{id:40,location:"103.807371,30.689541",edge:[41]},{id:41,location:"103.806655,30.689521",edge:[42]},{id:42,location:"103.806425,30.689498",edge:[43]},{id:43,location:"103.806248,30.689457",edge:[44]},{id:44,location:"103.80554,30.689199",edge:[45]},{id:45,location:"103.804966,30.688723",edge:[46]},{id:46,location:"103.804794,30.688539",edge:[47]},{id:47,location:"103.804531,30.688138",edge:[48]},{id:48,location:"103.804392,30.687685",edge:[49]},{id:49,location:"103.804381,30.687492",edge:[50]},{id:50,location:"103.804372,30.687198",edge:[51]},{id:51,location:"103.804388,30.686889",edge:[52]},{id:52,location:"103.804485,30.686672",edge:[53]},{id:53,location:"103.804619,30.686405",edge:[54]},{id:54,location:"103.804801,30.686073",edge:[55]},{id:55,location:"103.805064,30.685805",edge:[56]},{id:56,location:"103.805413,30.685487",edge:[57]},{id:57,location:"103.805671,30.685081",edge:[58]},{id:58,location:"103.80595,30.684379",edge:[59]},{id:59,location:"103.807554,30.684347",edge:[60]},{id:60,location:"103.807564,30.685505",edge:[61]},{id:61,location:"103.80802,30.685565",edge:[62]},{id:62,location:"103.808305,30.685694",edge:[63]},{id:63,location:"103.808482,30.685957",edge:[64]},{id:64,location:"103.808496,30.686218",edge:[65]},{id:65,location:"103.808405,30.686306",edge:[66]},{id:66,location:"103.808641,30.686421",edge:[67]},{id:67,location:"103.809274,30.686412",edge:[68]},{id:68,location:"103.809714,30.686449",edge:[69]},{id:69,location:"103.809988,30.686546",edge:[70]},{id:70,location:"103.810272,30.686638",edge:[71]},{id:71,location:"103.810508,30.686619",edge:[72]},{id:72,location:"103.810229,30.686619",edge:[73]},{id:73,location:"103.809998,30.68655",edge:[74]},{id:74,location:"103.809923,30.686776",edge:[75]},{id:75,location:"103.809757,30.686952",edge:[76]},{id:76,location:"103.809762,30.687062",edge:[77]},{id:77,location:"103.809709,30.687201",edge:[78]},{id:78,location:"103.809591,30.687256",edge:[79]},{id:79,location:"103.809451,30.68727",edge:[80]},{id:80,location:"103.809398,30.687597",edge:[81]},{id:81,location:"103.809392,30.687745",edge:[82]},{id:82,location:"103.809102,30.687731",edge:[83]},{id:83,location:"103.809113,30.687736",edge:[84]},{id:84,location:"103.80862,30.687408",edge:[85]},{id:85,location:"103.808486,30.687367",edge:[86]},{id:86,location:"103.808486,30.687367",edge:[87]},{id:87,location:"103.808475,30.687099",edge:[88]},{id:88,location:"103.808384,30.686924",edge:[89]},{id:89,location:"103.808159,30.686809",edge:[90]},{id:90,location:"103.80802,30.686786",edge:[91]},{id:91,location:"103.807928,30.686661",edge:[92]},{id:92,location:"103.808427,30.686297",edge:[93]},{id:93,location:"103.808505,30.686244",edge:[0]}]},w0={mapdata:[{id:0,location:"106.05989,30.873755",edge:[1]},{id:1,location:"106.059638,30.873469",edge:[2]},{id:2,location:"106.059366,30.873381",edge:[3]},{id:3,location:"106.058945,30.873562",edge:[4]},{id:4,location:"106.058469,30.873772",edge:[5]},{id:5,location:"106.058095,30.874151",edge:[6]},{id:6,location:"106.058046,30.87428",edge:[7]},{id:7,location:"106.058068,30.874377",edge:[8]},{id:8,location:"106.058147,30.874498",edge:[9]},{id:9,location:"106.058271,30.874584",edge:[10]},{id:10,location:"106.058379,30.874617",edge:[11]},{id:11,location:"106.058491,30.874628",edge:[12]},{id:12,location:"106.058901,30.8746",edge:[13]},{id:13,location:"106.059228,30.874581",edge:[14]},{id:14,location:"106.059372,30.874562",edge:[15]},{id:15,location:"106.059731,30.874407",edge:[16]},{id:16,location:"106.059526,30.874126",edge:[17]},{id:17,location:"106.059118,30.87431",edge:[18]},{id:18,location:"106.058916,30.874389",edge:[19]},{id:19,location:"106.05871,30.874496",edge:[20]},{id:20,location:"106.05859,30.874508",edge:[21]},{id:21,location:"106.058509,30.874477",edge:[22]},{id:22,location:"106.058297,30.874281",edge:[23]},{id:23,location:"106.058294,30.874202",edge:[24]},{id:24,location:"106.058327,30.874134",edge:[25]},{id:25,location:"106.0586,30.873983",edge:[26]},{id:26,location:"106.058793,30.873845",edge:[27]},{id:27,location:"106.05965,30.873468",edge:[28]},{id:28,location:"106.059725,30.873533",edge:[29]},{id:29,location:"106.059891,30.873772",edge:[30]},{id:30,location:"106.060172,30.873651",edge:[0]}]},S0={mapdata:[{id:0,location:"103.69543,30.914056",edge:[1]},{id:1,location:"103.695317,30.913949",edge:[2]},{id:2,location:"103.695196,30.913839",edge:[3]},{id:3,location:"103.695073,30.91365",edge:[4]},{id:4,location:"103.695494,30.913422",edge:[5]},{id:5,location:"103.695579,30.913352",edge:[6]},{id:6,location:"103.69556,30.913261",edge:[7]},{id:7,location:"103.695691,30.913138",edge:[8]},{id:8,location:"103.695957,30.912847",edge:[9]},{id:9,location:"103.696072,30.912768",edge:[10]},{id:10,location:"103.696429,30.912667",edge:[11]},{id:11,location:"103.696429,30.912667",edge:[12]},{id:12,location:"103.696677,30.912706",edge:[13]},{id:13,location:"103.697069,30.912471",edge:[14]},{id:14,location:"103.697519,30.912203",edge:[15]},{id:15,location:"103.697587,30.912473",edge:[16]},{id:16,location:"103.697665,30.912515",edge:[17]},{id:17,location:"103.69769,30.912586",edge:[18]},{id:18,location:"103.697642,30.912658",edge:[19]},{id:19,location:"103.69754,30.91267",edge:[20]},{id:20,location:"103.697497,30.912914",edge:[21]},{id:21,location:"103.697372,30.913139",edge:[22]},{id:22,location:"103.696973,30.913559",edge:[23]},{id:23,location:"103.696541,30.913822",edge:[24]},{id:24,location:"103.696178,30.913892",edge:[25]},{id:25,location:"103.695853,30.913967",edge:[26]},{id:26,location:"103.695604,30.914022",edge:[27]},{id:27,location:"103.695431,30.914061",edge:[28]},{id:28,location:"103.695347,30.913982",edge:[0]}]},M0={cuit_hkg:v0.mapdata,cuit_lqy:y0.mapdata,cdutcm_wj:b0.mapdata,ncwsxx:w0.mapdata,sctbc:S0.mapdata};function de(o){return M0[o]||[]}function $0(){return Object.entries({成都信息工程大学航空港校区:"cuit_hkg",成都信息工程大学龙泉校区:"cuit_lqy",成都中医药大学温江校区:"cdutcm_wj",南充卫生学校:"ncwsxx",四川工商职业技术学院:"sctbc"}).map(([e,t])=>({label:e,value:t}))}const D0=(o,e,t)=>{const a=de(o.mapChoice);if(!a.length)return o;const n=Math.floor(Math.random()*a.length);let i=a[n],s=0;const l=[],r=new Set,[g,p]=i.location.split(",").map(Number);for(l.push({lat:p,lng:g}),r.add(i.id);s<e&&i.edge.length>0;){const h=i.edge.filter(x=>!r.has(x));if(h.length===0)break;const M=h[Math.floor(Math.random()*h.length)],v=a[M],[m,u]=v.location.split(",").map(Number),[I,_]=i.location.split(",").map(Number),L=Math.sqrt(Math.pow((u-_)*111e3,2)+Math.pow((m-I)*111e3*Math.cos(_*Math.PI/180),2));if(s+L<=e*1.1)l.push({lat:u,lng:m}),r.add(v.id),s+=L,i=v;else break}if(l.length<2){const h=i.edge[0],M=a[h],[v,m]=M.location.split(",").map(Number);l.push({lat:m,lng:v})}const y=l.map((h,M)=>{if(M===0||M===l.length-1)return h;const v=2e-5;return{lat:h.lat+(Math.random()-.5)*v,lng:h.lng+(Math.random()-.5)*v}});return{pathLength:s,startPoint:y[0],endPoint:y[y.length-1],path:y,mapChoice:o.mapChoice}};class I0{constructor(e,t,a){Z(this,"id");Z(this,"location");Z(this,"edge");this.id=e,this.location=t,this.edge=a}}const ie=(o,e)=>Ce.getDistance({latitude:o[1],longitude:o[0]},{latitude:e[1],longitude:e[0]}),k0=(o,e)=>{const t=Math.random(),a=e[1]-o[1],n=e[0]-o[0];return[o[0]+n*t,o[1]+a*t]},ee=()=>10*Math.random(),oe=(o,e)=>{o===e&&console.log("范围空!");const t=e-o;return Math.floor(o+t*Math.random())},N0=(o,e)=>{if(!e||e.length===0)return console.error("No locations provided"),"[]";let t=0;const a=Math.floor(Math.random()*e.length);let n=e[a];const i=Array(10).fill("");let s=Date.now()-30*60*1e3,l=-1,r=n.location.split(",");i[0]=`${r[0]}-${r[1]}-${s}-${ee().toFixed(1)}`;let g=1;for(;t<o;){r=n.location.split(",");const y=n.edge;y||console.log("edge为空");const h=oe(0,y.length);let M=y[h];M===l&&(M=y[(h+1)%y.length]);const v=e[M],m=r.map(Number),u=v.location.split(",").map(Number),I=ie(m,u);t+=I;let _=m;for(let x=0;x<10;x++){const A=k0(_,u),V=ie(_,A);_=A,s+=V/oe(1,5)*1e3,i[g++]=`${_[0]}-${_[1]}-${s}-${ee().toFixed(1)}`}const L=ie(_,u);s+=L/oe(1,5)*1e3,i[g++]=`${u[0]}-${u[1]}-${s}-${ee().toFixed(1)}`,l=n.id,n=v}s+=oe(5,10)*1e3;const p=n.location.replace(",","-");return i[g]=`${p}-${s}-${ee().toFixed(1)}`,JSON.stringify(i)},T0=()=>{const o=new Date;return o.setMinutes(o.getMinutes()-30),o.toISOString().replace("T"," ").substring(0,19)},C0=(o,e)=>{const t=de(e);if(!t||t.length===0)return console.error("No map data found for:",e),"[]";const a=t.map(n=>new I0(n.id,n.location,n.edge));return N0(o,a)};function x0(){const o=D(!1);return{isSubmitting:o,submit:async(t,a,n,i)=>{if(o.value)return b.warning("正在提交中，请勿重复操作"),!1;o.value=!0;try{const s=JSON.parse(localStorage.getItem("runStandardData")||"{}");if(!s.semesterYear)return b.error("错误: 缺少学期年份信息"),!1;const l=C0(t,n),r={againRunStatus:"0",againRunTime:0,appVersions:K.device.appVersion,brand:K.device.brand,mobileType:K.device.mobileType,sysVersions:K.device.sysVersion,trackPoints:l,distanceTimeStatus:"1",innerSchool:"1",runDistance:t,runTime:a,userId:i,vocalStatus:"1",yearSemester:s.semesterYear,recordDate:T0()},{response:g}=await W.submitNewActivity(r);return b.success("提交成功,"+g.resultDesc),!0}catch(s){return console.error("提交失败:",s),b.error("提交失败"),!1}finally{setTimeout(()=>{o.value=!1},2e3)}}}}const R0={class:"dashboard-header-content"},P0={class:"header-right"},L0=["href"],A0={class:"header-icon-button"},V0=j({__name:"DashboardHeader",props:{isDarkMode:{type:Boolean},userName:{}},emits:["refresh","showEndDate","logout","toggleTheme"],setup(o,{emit:e}){const t=e,a=i=>{switch(i){case"refresh":t("refresh");break;case"showEndDate":t("showEndDate");break;case"logout":t("logout");break}},n=()=>{t("toggleTheme")};return(i,s)=>{const l=f("el-icon"),r=f("el-dropdown-item"),g=f("el-dropdown-menu"),p=f("el-dropdown"),y=f("el-header");return S(),F(y,{class:"dashboard-header"},{default:c(()=>[w("div",R0,[w("div",{class:"logo-container",onClick:s[0]||(s[0]=h=>i.$emit("refresh"))},[d(l,null,{default:c(()=>[d($(De),{class:"logo-icon"})]),_:1})]),w("div",P0,[w("div",{class:"header-icon-button",onClick:n},[i.isDarkMode?(S(),F(l,{key:1},{default:c(()=>[d($(ke))]),_:1})):(S(),F(l,{key:0},{default:c(()=>[d($(Ie))]),_:1}))]),w("a",{href:$(K).urls.github,target:"_blank",rel:"noopener noreferrer",class:"header-icon-button"},[d(l,null,{default:c(()=>[d($(He))]),_:1})],8,L0),d(p,{onCommand:a,trigger:"click",placement:"bottom-end"},{dropdown:c(()=>[d(g,{class:"menu-item"},{default:c(()=>[d(r,{command:"refresh"},{default:c(()=>[d(l,null,{default:c(()=>[d($(a0))]),_:1}),T(" "+U(i.userName),1)]),_:1}),d(r,{command:"refresh"},{default:c(()=>[d(l,null,{default:c(()=>[d($(o0))]),_:1}),s[1]||(s[1]=T(" 刷新数据 "))]),_:1}),d(r,{command:"showEndDate"},{default:c(()=>[d(l,null,{default:c(()=>[d($(Qe))]),_:1}),s[2]||(s[2]=T(" 截止日期 "))]),_:1}),d(r,{command:"logout"},{default:c(()=>[d(l,null,{default:c(()=>[d($(Ye))]),_:1}),s[3]||(s[3]=T(" 退出登录 "))]),_:1})]),_:1})]),default:c(()=>[w("div",A0,[d(l,null,{default:c(()=>[d($(s0))]),_:1})])]),_:1})])])]),_:1})}}}),F0=P(V0,[["__scopeId","data-v-64afb03a"]]),fe=(o,e)=>{if(!o||!e||e<=0||isNaN(o)||isNaN(e))return"0'00''";const t=o/(e/1e3);if(isNaN(t)||!isFinite(t))return"0'00''";const a=Math.floor(t),n=Math.round((t-a)*60);return`${a}'${n<10?"0":""}${n}''`},E0={name:"RunMap"},q0=j({...E0,__name:"RunMap",props:{mapChoice:{},visible:{type:Boolean},distance:{},duration:{}},setup(o){const e=o,t=D(null);let a=null,n=null,i=[];const s=async()=>{if(t.value)try{const r=await Re.load({key:"53e436d60e245e4d0bd8b65189ffa62b",version:"2.0",plugins:["AMap.Icon"]});a=new r.Map(t.value,{zoom:17,viewMode:"2D"}),l()}catch(r){console.error("Failed to load AMap:",r)}},l=()=>{if(!a){console.log("Map not initialized");return}const r=de(e.mapChoice);if(!r.length){console.log("No map data found");return}n&&a.remove(n),i.forEach(v=>a.remove(v)),i=[];const g={pathLength:0,startPoint:{lat:0,lng:0},endPoint:{lat:0,lng:0},path:r.map(v=>{const[m,u]=v.location.split(",").map(Number);return{lat:u,lng:m}}),mapChoice:e.mapChoice};let p;e.distance&&e.duration?p=D0(g,e.distance,e.duration):(g.startPoint=g.path[0],g.endPoint=g.path[g.path.length-1],p=g);const y=p.path.map(v=>[v.lng,v.lat]);n=new AMap.Polyline({path:y,strokeColor:"#409EFF",strokeWeight:6,strokeOpacity:.8,showDir:!0});const h=new AMap.Marker({position:[p.startPoint.lng,p.startPoint.lat],content:'<div class="marker start-marker">起</div>'}),M=new AMap.Marker({position:[p.endPoint.lng,p.endPoint.lat],content:'<div class="marker end-marker">终</div>'});i.push(h,M),a.add([n,...i]),a.setFitView([n,...i])};return X(()=>e.mapChoice,()=>{e.visible&&l()}),X(()=>e.visible,r=>{r&&setTimeout(()=>{a?(a.resize(),l()):s()},100)}),X(()=>[e.distance,e.duration],()=>{e.visible&&a&&l()}),ne(()=>{e.visible&&s()}),xe(()=>{a&&(a.destroy(),a=null)}),(r,g)=>(S(),R("div",{ref_key:"mapContainer",ref:t,class:"map-container"},null,512))}}),B0=P(q0,[["__scopeId","data-v-500aa668"]]),O0={class:"map-skeleton-content"},z0={class:"map-content"},H0={RunMapContainer:"RunMapContainer"},J0=j({...H0,__name:"RunMapContainer",props:{route:{},visible:{type:Boolean},distance:{},duration:{}},setup(o){const e=o,t=D(),a=D(!1);return X(()=>e.route,async n=>{var i;if(n){a.value=!0;try{await((i=t.value)==null?void 0:i.initMap())}catch(s){console.error("Failed to load map:",s)}finally{a.value=!1}}}),(n,i)=>{const s=f("el-icon"),l=f("el-skeleton");return S(),F(l,{loading:!n.route,class:"map-container",animated:""},{template:c(()=>[w("div",O0,[d(s,{class:"map-skeleton-icon"},{default:c(()=>[d($(m0))]),_:1})])]),default:c(()=>[ue(w("div",z0,[d(B0,{"map-choice":n.route,visible:n.visible,distance:n.distance,duration:n.duration},null,8,["map-choice","visible","distance","duration"])],512),[[Pe,n.route]])]),_:1},8,["loading"])}}}),U0=P(J0,[["__scopeId","data-v-55ed3df4"]]),j0={key:0,class:"form-info"},Y0={key:0,class:"pace-error-message"},G0={class:"form-footer"},K0=j({__name:"SubmitForm",props:{formState:{},submitting:{type:Boolean},distanceLimits:{},timeLimits:{}},emits:["submit","update-form-state"],setup(o,{emit:e}){const t=o,a=e,n=D(),i=D(!1),s=$0(),{distanceLimits:l,timeLimits:r}=t;z(()=>l.min);const g=z(()=>l.max);z(()=>r.min);const p=z(()=>r.max),y=z(()=>{if(!t.formState.distance||!t.formState.duration||t.formState.distance===0)return!0;const m=t.formState.distance/1e3,u=t.formState.duration/m;return isNaN(u)||u>=6}),h={distance:[{required:!0,message:"请输入跑步里程"},{validator:(m,u,I)=>{const _=Number(u);isNaN(_)?I(new Error("请输入有效数字")):I()},trigger:"blur"}],duration:[{required:!0,message:"请输入跑步时长"},{validator:(m,u,I)=>{const _=Number(u);isNaN(_)?I(new Error("请输入有效数字")):I()},trigger:"blur"}],route:[{required:!0,message:"请选择学校地图"}]},M=async()=>{try{await n.value.validate();const m=Number(t.formState.distance),u=Number(t.formState.duration);if(t.formState.distance=m,t.formState.duration=u,!y.value){b.error("配速不能小于6分钟/公里");return}a("submit")}catch(m){console.error(m)}},v=()=>{const m=g.value+1e3,u=p.value+10;let I,_;do I=Math.floor(Math.random()*m),_=Math.floor(Math.random()*u);while(I>0&&_/(I/1e3)<6);a("update-form-state",{distance:I,duration:_})};return X(()=>t.formState.route,m=>{m&&(i.value=!0)}),(m,u)=>{const I=f("el-input"),_=f("el-form-item"),L=f("el-col"),x=f("el-row"),A=f("el-option"),V=f("el-select"),q=f("el-button"),H=f("el-form"),J=f("el-card");return S(),F(J,{class:"submit-card"},{default:c(()=>[d(H,{ref_key:"formRef",ref:n,model:m.formState,rules:h,"label-position":"left","label-width":"auto"},{default:c(()=>[d(x,{gutter:16},{default:c(()=>[d(L,{xs:24,sm:12},{default:c(()=>[d(_,{label:"跑步里程",prop:"distance"},{default:c(()=>[d(I,{modelValue:m.formState.distance,"onUpdate:modelValue":u[0]||(u[0]=k=>m.formState.distance=k),type:"number",controls:!1,style:{width:"100%"},placeholder:"请输入跑步里程（米），系统只会记录学校规定的区间限制内的有效值"},{append:c(()=>u[3]||(u[3]=[T("米")])),_:1},8,["modelValue"])]),_:1})]),_:1}),d(L,{xs:24,sm:12},{default:c(()=>[d(_,{label:"跑步时长",prop:"duration"},{default:c(()=>[d(I,{modelValue:m.formState.duration,"onUpdate:modelValue":u[1]||(u[1]=k=>m.formState.duration=k),type:"number",controls:!1,style:{width:"100%"},placeholder:"请输入跑步时长（分钟），系统只会记录学校规定的区间限制内的有效值"},{append:c(()=>u[4]||(u[4]=[T("分钟")])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),d(_,{label:"地图选择",prop:"route"},{default:c(()=>[d(V,{modelValue:m.formState.route,"onUpdate:modelValue":u[2]||(u[2]=k=>m.formState.route=k),style:{width:"100%"},placeholder:"请选择学校地图"},{default:c(()=>[(S(!0),R(ae,null,me($(s),k=>(S(),F(A,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m.formState.distance&&m.formState.duration?(S(),R("div",j0,[w("span",{class:Le({"text-error":!y.value})}," 当前配速: "+U(m.formState.distance===0?"0:00":$(fe)(m.formState.duration,m.formState.distance))+"/公里 ",3),y.value?te("",!0):(S(),R("div",Y0," 配速过慢，请重新输入 "))])):te("",!0),w("div",G0,[d(q,{plain:"",onClick:v,disabled:m.submitting,class:"footer-btn random-btn"},{default:c(()=>u[5]||(u[5]=[T(" 随机填充 ")])),_:1},8,["disabled"]),d(q,{type:"primary",onClick:M,loading:m.submitting,disabled:m.submitting||!y.value||m.submitting,class:"footer-btn submit-btn"},{default:c(()=>u[6]||(u[6]=[T(" 提交记录 ")])),_:1},8,["loading","disabled"])]),d(U0,{route:m.formState.route,visible:i.value,distance:m.formState.distance,duration:m.formState.duration},null,8,["route","visible","distance","duration"])]),_:1},8,["model"])]),_:1})}}}),W0=P(K0,[["__scopeId","data-v-0321e5cf"]]),Q0={class:"stats-panel"},X0={class:"stats-skeleton"},Z0=j({__name:"StatsPanel",props:{loading:{type:Boolean},activity:{},runInfo:{}},setup(o){return(e,t)=>{const a=f("el-skeleton-item"),n=f("el-col"),i=f("el-row"),s=f("el-statistic"),l=f("el-skeleton");return S(),R("div",Q0,[d(l,{loading:e.loading,animated:""},{template:c(()=>[d(i,{gutter:16},{default:c(()=>[(S(),R(ae,null,me(3,r=>d(n,{span:8,key:r},{default:c(()=>[w("div",X0,[d(a,{variant:"text",style:{width:"30%","margin-bottom":"8px"}}),d(a,{variant:"text",style:{width:"50%"}})])]),_:2},1024)),64))]),_:1})]),default:c(()=>[d(i,{gutter:16},{default:c(()=>[d(n,{span:8},{default:c(()=>{var r;return[d(s,{title:"俱乐部完成率",value:((r=e.activity)==null?void 0:r.joinNum)||0,"value-style":"color: #413a3a;"},{suffix:c(()=>[T("/"+U(e.activity?e.activity.totalNum.toFixed(0):"0"),1)]),_:1},8,["value"])]}),_:1}),d(n,{span:8},{default:c(()=>{var r;return[d(s,{title:"校园跑完成率",value:((r=e.activity)==null?void 0:r.runJoinNum)||0,"value-style":"color: #413a3a;"},{suffix:c(()=>[T("/"+U(e.activity?e.activity.runTotalNum.toFixed(0):"0"),1)]),_:1},8,["value"])]}),_:1}),d(n,{span:8},{default:c(()=>[d(s,{title:"里程完成率",value:e.runInfo?+(e.runInfo.runValidDistance/1e3).toFixed(2):0,"value-style":"color: #413a3a;"},{suffix:c(()=>[T("/"+U(e.runInfo?(e.runInfo.needRunDistance/1e3).toFixed(0):"0"),1)]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["loading"])])}}}),eo=P(Z0,[["__scopeId","data-v-2f28db84"]]),oo={class:"records-list"},to={style:{padding:"2px"}},io={class:"status-container"},no=50,ao=50,lo=50,co=j({__name:"RunRecords",props:{records:{},loading:{type:Boolean},pagination:{}},emits:["pageChange"],setup(o,{emit:e}){const t=e,a=z(()=>window.innerHeight-no-ao-lo),n=i=>{t("pageChange",i)};return(i,s)=>{const l=f("el-skeleton-item"),r=f("el-table-column"),g=f("el-icon"),p=f("el-form-item"),y=f("el-form"),h=f("el-table"),M=f("el-empty"),v=f("el-skeleton"),m=f("el-pagination"),u=f("el-card"),I=Ae("loading");return ue((S(),F(u,{class:"records-card","element-loading-text":"记录加载中"},{default:c(()=>[w("div",oo,[d(v,{loading:i.loading,animated:"",count:10},{template:c(()=>[w("div",to,[d(l,{variant:"p",style:{width:"100%",height:"5px"}})])]),default:c(()=>[i.records.length>0?(S(),F(h,{key:0,data:i.records,"table-layout":"auto",border:"",stripe:"",height:a.value,style:{width:"100%"}},{default:c(()=>[d(r,{prop:"recordDate",label:"记录时间",fixed:"",sortable:"",align:"center"}),d(r,{prop:"defeatedInfo",label:"状态",align:"center"},{default:c(({row:_})=>[w("div",io,[d(g,{style:Ve({color:_.defeatedInfo==="有效跑步"?"#409EFF":"#F56C6C"})},{default:c(()=>[(S(),F(Fe(_.defeatedInfo==="有效跑步"?$(Ee):$(qe))))]),_:2},1032,["style"]),T(" "+U(_.defeatedInfo),1)])]),_:1}),d(r,{type:"expand","min-width":"10",label:"更多",align:"center"},{default:c(({row:_})=>[d(y,{"label-position":"left",inline:"",class:"expanded-form"},{default:c(()=>[d(p,{label:"跑步时长"},{default:c(()=>[T(U(_.runTime)+" 分钟 ",1)]),_:2},1024),d(p,{label:"跑步里程"},{default:c(()=>[T(U((_.runDistance/1e3).toFixed(2))+" 公里 ",1)]),_:2},1024),d(p,{label:"平均配速"},{default:c(()=>[T(U($(fe)(_.runTime,_.runDistance)),1)]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","height"])):(S(),F(M,{key:1,description:"暂无跑步记录"}))]),_:1},8,["loading"])]),d(m,{class:"pagination","current-page":i.pagination.current,total:i.pagination.total,"page-size":i.pagination.pageSize,layout:"pager",onCurrentChange:n,small:""},null,8,["current-page","total","page-size"])]),_:1})),[[I,i.loading]])}}}),so=P(co,[["__scopeId","data-v-30fa6992"]]);function ro(){const o=D(null);return{notice:o,fetchNotice:async()=>{try{const t=await W.getNotice();o.value={message:t.data.message}}catch(t){console.error("获取通知失败:",t),b.error("获取通知失败："+t.message)}}}}const go={key:0,class:"notice-board"},uo=["innerHTML"],mo=j({__name:"NoticeBoard",setup(o){const{notice:e,fetchNotice:t}=ro();return ne(()=>{t()}),(a,n)=>{var i;return(i=$(e))!=null&&i.message?(S(),R("div",go,[w("div",{class:"notice-content",innerHTML:$(e).message},null,8,uo)])):te("",!0)}}}),po=P(mo,[["__scopeId","data-v-64f571ca"]]),fo={class:"dashboard-fixed-area"},_o={class:"header-container"},ho={class:"content-wrapper"},vo={class:"notice-container"},yo={class:"dashboard-footer"},bo={class:"footer-container"},wo=j({__name:"Dashboard",setup(o){const e=re(),{logout:t}=Ne(),{activity:a,runInfo:n,runDistanceMin:i,runDistanceMax:s,runTimeMin:l,runTimeMax:r,records:g,pagination:p,handleTableChange:y,refreshData:h,initDashboard:M}=h0(),v=z(()=>i.value),m=z(()=>s.value),u=z(()=>l.value),I=z(()=>r.value),{submit:_}=x0(),L=D("home"),x=N=>{L.value=N},{showEndDate:A}=pe(),V=D(e.$state.isDarkMode),q=()=>{t()},H=()=>{e.toggleDarkMode(),V.value=e.$state.isDarkMode},J=()=>Math.floor(Math.random()*9)+1,k=N=>N.toString().endsWith("0")?Math.floor(N/10)*10+J():N;D();const C=D(!1),B=ge({distance:k(i.value),duration:k(l.value),route:""}),_e=N=>{B.distance=N.distance,B.duration=N.duration},he=async()=>{var N;try{if(!((N=e.userInfo)!=null&&N.userId)){b.error("用户信息不完整");return}B.distance=k(B.distance),B.duration=k(B.duration),C.value=!0,await _(B.distance,B.duration,B.route,e.userInfo.userId)&&setTimeout(async()=>{await h()},1e3)}catch(G){console.error(G)}finally{C.value=!1}},Q=D(!0),Y=D(!0),ve=async N=>{Y.value=!0;try{await y(N)}finally{Y.value=!1}},ye=async()=>{Q.value=!0,Y.value=!0;try{await h()}catch(N){console.error("Failed to refresh data:",N),b.error("数据刷新失败")}finally{Q.value=!1,Y.value=!1}};return ne(async()=>{Q.value=!0,Y.value=!0;try{await Promise.all([M()])}catch(N){console.error("Failed to load data:",N),b.error("数据加载失败")}finally{Q.value=!1,Y.value=!1}}),(N,G)=>{const be=f("el-main"),le=f("el-menu-item"),we=f("el-menu"),Se=f("el-container");return S(),F(Se,{class:"dashboard-container"},{default:c(()=>{var ce;return[w("div",fo,[w("div",_o,[d(F0,{"is-dark-mode":V.value,"user-name":(ce=$(e).userInfo)==null?void 0:ce.name,onRefresh:ye,onShowEndDate:$(A),onLogout:q,onToggleTheme:H},null,8,["is-dark-mode","user-name","onShowEndDate"])])]),d(be,{class:"dashboard-main"},{default:c(()=>[w("div",ho,[L.value==="home"?(S(),R(ae,{key:0},[d(eo,{loading:!$(a)||!$(n)||Q.value,activity:$(a),"run-info":$(n)},null,8,["loading","activity","run-info"]),d(W0,{"form-state":B,submitting:C.value,"distance-limits":{min:v.value,max:m.value},"time-limits":{min:u.value,max:I.value},onSubmit:he,onUpdateFormState:_e},null,8,["form-state","submitting","distance-limits","time-limits"]),w("div",vo,[d(po)])],64)):L.value==="records"?(S(),F(so,{key:1,records:$(g),loading:Y.value,pagination:$(p),onPageChange:ve},null,8,["records","loading","pagination"])):te("",!0)])]),_:1}),w("div",yo,[w("div",bo,[d(we,{mode:"horizontal","default-active":L.value,onSelect:x,class:"nav-bar"},{default:c(()=>[d(le,{index:"home"},{default:c(()=>G[0]||(G[0]=[T("数据")])),_:1}),d(le,{index:"records"},{default:c(()=>G[1]||(G[1]=[T("记录")])),_:1})]),_:1},8,["default-active"])])])]}),_:1})}}}),Io=P(wo,[["__scopeId","data-v-06e803bf"]]);export{Io as default};
